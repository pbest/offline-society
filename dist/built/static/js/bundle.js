(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
function findAncestor(e, t) {
  for (; (e = e.parentElement) && !e.classList.contains(t);) {}return e;
}for (var overlays = document.getElementsByClassName("js-overlay-link"), close = document.getElementsByClassName("js-overlay-close"), className = "activated", i = 0; i < overlays.length; i++) {
  var overlay = overlays[i],
      modal = document.getElementById(overlay.getAttribute("data-target"));overlay.addEventListener("click", function () {
    var e = modal;e.classList.add(className);
  }, !1);
}for (var i = 0; i < close.length; i++) {
  close[i].addEventListener("click", function () {
    var e = findAncestor(this, "Overlay");e.classList.remove(className);
  }, !1);
}var openNav = document.getElementById("js-navOpen"),
    closeNav = document.getElementById("js-navClose"),
    navEl = document.getElementsByClassName("nav")[0],
    navOpenClass = "navOpen";openNav.addEventListener("click", function () {
  console.log("navClick"), navEl.classList.add(navOpenClass);
}), closeNav.addEventListener("click", function () {
  navEl.classList.remove(navOpenClass);
});for (var matchEls = document.getElementsByClassName("match"), matchClass = "match--open", i = 0; i < matchEls.length; i++) {
  matchEls[i].addEventListener("click", function () {
    console.log(this), this.classList.add(matchClass);
  }, !1);
}var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(e) {
  for (var t = function t(e) {
    for (var t, n, a, i, l = e.childNodes, s = l.length, r = [], o = 0; s > o; o++) {
      t = l[o], 1 === t.nodeType && (n = t.children[0], a = n.getAttribute("data-size").split("x"), i = { src: n.getAttribute("href"), w: parseInt(a[0], 10), h: parseInt(a[1], 10) }, t.children.length > 1 && (i.title = t.children[1].innerHTML), n.children.length > 0 && (i.msrc = n.children[0].getAttribute("src")), i.el = t, r.push(i));
    }return r;
  }, n = function d(e, t) {
    return e && (t(e) ? e : d(e.parentNode, t));
  }, a = function a(e) {
    e = e || window.event, e.preventDefault ? e.preventDefault() : e.returnValue = !1;var t = e.target || e.srcElement,
        a = n(t, function (e) {
      return e.tagName && "FIGURE" === e.tagName.toUpperCase();
    });if (a) {
      for (var i, s = a.parentNode, r = a.parentNode.childNodes, o = r.length, c = 0, d = 0; o > d; d++) {
        if (1 === r[d].nodeType) {
          if (r[d] === a) {
            i = c;break;
          }c++;
        }
      }return i >= 0 && l(i, s), !1;
    }
  }, i = function i() {
    var e = window.location.hash.substring(1),
        t = {};if (e.length < 5) return t;for (var n = e.split("&"), a = 0; a < n.length; a++) {
      if (n[a]) {
        var i = n[a].split("=");i.length < 2 || (t[i[0]] = i[1]);
      }
    }return t.gid && (t.gid = parseInt(t.gid, 10)), t;
  }, l = function l(e, n, a, i) {
    var l,
        s,
        r,
        o = document.querySelectorAll(".pswp")[0];if (r = t(n), s = { galleryUID: n.getAttribute("data-pswp-uid"), getThumbBoundsFn: function getThumbBoundsFn(e) {
        var t = r[e].el.getElementsByTagName("img")[0],
            n = window.pageYOffset || document.documentElement.scrollTop,
            a = t.getBoundingClientRect();return { x: a.left, y: a.top + n, w: a.width };
      } }, i) {
      if (s.galleryPIDs) {
        for (var c = 0; c < r.length; c++) {
          if (r[c].pid == e) {
            s.index = c;break;
          }
        }
      } else s.index = parseInt(e, 10) - 1;
    } else s.index = parseInt(e, 10);isNaN(s.index) || (a && (s.showAnimationDuration = 0), l = new PhotoSwipe(o, PhotoSwipeUI_Default, r, s), l.init());
  }, s = document.querySelectorAll(e), r = 0, o = s.length; o > r; r++) {
    s[r].setAttribute("data-pswp-uid", r + 1), s[r].onclick = a;
  }var c = i();c.pid && c.gid && l(c.pid, s[c.gid - 1], !0, !0);
};initPhotoSwipeFromDOM(".gallery");

},{}]},{},[1])


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc3RhdGljL2pzL2FwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQzRCUTtBQUFTLHNCQUFjLEdBQUk7QUFDdkIsVUFBUSxJQUFLLEVBQUcsbUJBQW1CLEVBQUcsVUFBVSxTQUFTLE9BQ3pELEFBQU87QUF0QlgsTUFKSSxBQUlDLGVBSlUsU0FBUyx1QkFBdUIsb0JBQzNDLFFBQVEsU0FBUyx1QkFBdUIscUJBQ3hDLFlBQVksYUFFUCxJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVEsS0FBSztBQUN0QyxBQUFJLGdCQUFVLFNBQVM7TUFFbkIsUUFBUSxTQUFTLGVBQWUsUUFBUSxhQUFhLEFBQ3pELHdCQUFRLGlCQUFpQixTQUFTO0FBQzlCLEFBQUksWUFBSyxBQUVULFFBQUcsVUFBVSxJQUFJO01BRWxCO0FBR1AsTUFBSyxBQUFJLFFBQUksR0FBRyxJQUFJLE1BQU0sUUFBUTtBQUM5QixRQUFNLEdBQUcsaUJBQWlCLFNBQVM7QUFDL0IsQUFBSSxZQUFXLGFBQWEsTUFBSyxBQUVqQyxhQUFTLFVBQVUsT0FBTztNQUMzQixBQVlmO0NBQUksY0FBVSxTQUFTLGVBQWU7SUFDbEMsV0FBVyxTQUFTLGVBQWU7SUFDbkMsUUFBUSxTQUFTLHVCQUF1QixPQUFPO0lBQy9DLGVBQWUsQUFFbkIsa0JBQVEsaUJBQWlCLFNBQVM7QUFDOUIsVUFBUSxJQUFJLGFBQ1osTUFBTSxVQUFVLElBQUk7YUFHZixpQkFBaUIsU0FBUztBQUMvQixRQUFNLFVBQVUsT0FBTztBQVUzQixDQVhBLE9BU0ksQUFFQyxlQUZZLFNBQVMsdUJBQXVCLFVBQzdDLGFBQWEsZUFDUixJQUFJLEdBQUcsSUFBSSxTQUFTLFFBQVE7QUFFekIsV0FBUyxHQUFHLGlCQUFpQixTQUFTO0FBQ2xDLFlBQVEsSUFBSSxPQUdaLEtBQUssVUFBVSxJQUFJO01BQ3BCLEFBTVo7Q0FBSSw0QkFBd0IsK0JBQVM7QUErTHBDLGVB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SUFBSSxHQUFHLElBQUksRUFBZ0IsUUFBWSxJQUFKLEdBQU87QUFDOUMsTUFBZ0IsR0FBRyxhQUFhLGlCQUFpQixJQUFFLElBQ25ELEVBQWdCLEdBQUcsVUFBVSxBQUlqQztHQUFJLFFBQVcsQUFDWixNQUFTLE9BQU8sRUFBUyxPQUN4QixFQUFnQixFQUFTLEtBQU8sRUFBaUIsRUFBUyxNQUFNLEtBQUssSUFBTTtBQUtuRix3QkFBc0IiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgT1ZFUkxBWVNcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogYWN0aXZhdGUgb3ZlcmxheSBvbiBsb2FkICovXG4gICAgICAgIHZhciBvdmVybGF5cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2pzLW92ZXJsYXktbGluaycpXG4gICAgICAgIHZhciBjbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2pzLW92ZXJsYXktY2xvc2UnKVxuICAgICAgICB2YXIgY2xhc3NOYW1lID0gJ2FjdGl2YXRlZCdcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG92ZXJsYXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb3ZlcmxheSA9IG92ZXJsYXlzW2ldXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKG92ZXJsYXkpXG4gICAgICAgICAgICB2YXIgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvdmVybGF5LmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKSlcbiAgICAgICAgICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gbW9kYWxcbiAgICAgICAgICAgICAgICAvL3ZhciBjbGFzc05hbWUgPSAnYWN0aXZhdGVkJ1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKVxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZWwpXG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZyhjbG9zZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvc2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNsb3NlW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRFbCA9IGZpbmRBbmNlc3Rvcih0aGlzLCdPdmVybGF5Jyk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzKVxuICAgICAgICAgICAgICAgIHBhcmVudEVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKVxuICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmluZEFuY2VzdG9yIChlbCwgY2xzKSB7XG4gICAgICAgICAgICB3aGlsZSAoKGVsID0gZWwucGFyZW50RWxlbWVudCkgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucyhjbHMpKTtcbiAgICAgICAgICAgIHJldHVybiBlbDtcbiAgICAgICAgfVxuXG4gLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgTU9CSUxFIE5BVlxuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vLyBPcGVuIE1vYmlsZSBOYXZcbnZhciBvcGVuTmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzLW5hdk9wZW4nKTtcbnZhciBjbG9zZU5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqcy1uYXZDbG9zZScpO1xudmFyIG5hdkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmF2JylbMF07XG52YXIgbmF2T3BlbkNsYXNzID0gJ25hdk9wZW4nO1xuXG5vcGVuTmF2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgIGNvbnNvbGUubG9nKFwibmF2Q2xpY2tcIik7XG4gICAgbmF2RWwuY2xhc3NMaXN0LmFkZChuYXZPcGVuQ2xhc3MpO1xufSk7XG5cbmNsb3NlTmF2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgIG5hdkVsLmNsYXNzTGlzdC5yZW1vdmUobmF2T3BlbkNsYXNzKTtcbn0pO1xuXG5cbiAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBNQVRDSEVTXG4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBtYXRjaEVscyAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWF0Y2gnKTtcbnZhciBtYXRjaENsYXNzID0gJ21hdGNoLS1vcGVuJztcbmZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hFbHMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgbWF0Y2hFbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcyk7XG4gICAgICAgICAgICAgICAgLy92YXIgcGFyZW50RWwgPSBmaW5kQW5jZXN0b3IodGhpcywnT3ZlcmxheScpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcylcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQobWF0Y2hDbGFzcylcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgUEhPVE9TV0lQRVxuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gICB2YXIgaW5pdFBob3RvU3dpcGVGcm9tRE9NID0gZnVuY3Rpb24oZ2FsbGVyeVNlbGVjdG9yKSB7XG5cbiAgICAvLyBwYXJzZSBzbGlkZSBkYXRhICh1cmwsIHRpdGxlLCBzaXplIC4uLikgZnJvbSBET00gZWxlbWVudHNcbiAgICAvLyAoY2hpbGRyZW4gb2YgZ2FsbGVyeVNlbGVjdG9yKVxuICAgIHZhciBwYXJzZVRodW1ibmFpbEVsZW1lbnRzID0gZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgdmFyIHRodW1iRWxlbWVudHMgPSBlbC5jaGlsZE5vZGVzLFxuICAgICAgICAgICAgbnVtTm9kZXMgPSB0aHVtYkVsZW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGl0ZW1zID0gW10sXG4gICAgICAgICAgICBmaWd1cmVFbCxcbiAgICAgICAgICAgIGxpbmtFbCxcbiAgICAgICAgICAgIHNpemUsXG4gICAgICAgICAgICBpdGVtO1xuXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBudW1Ob2RlczsgaSsrKSB7XG5cbiAgICAgICAgICAgIGZpZ3VyZUVsID0gdGh1bWJFbGVtZW50c1tpXTsgLy8gPGZpZ3VyZT4gZWxlbWVudFxuXG4gICAgICAgICAgICAvLyBpbmNsdWRlIG9ubHkgZWxlbWVudCBub2Rlc1xuICAgICAgICAgICAgaWYoZmlndXJlRWwubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGlua0VsID0gZmlndXJlRWwuY2hpbGRyZW5bMF07IC8vIDxhPiBlbGVtZW50XG5cbiAgICAgICAgICAgIHNpemUgPSBsaW5rRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNpemUnKS5zcGxpdCgneCcpO1xuXG4gICAgICAgICAgICAvLyBjcmVhdGUgc2xpZGUgb2JqZWN0XG4gICAgICAgICAgICBpdGVtID0ge1xuICAgICAgICAgICAgICAgIHNyYzogbGlua0VsLmdldEF0dHJpYnV0ZSgnaHJlZicpLFxuICAgICAgICAgICAgICAgIHc6IHBhcnNlSW50KHNpemVbMF0sIDEwKSxcbiAgICAgICAgICAgICAgICBoOiBwYXJzZUludChzaXplWzFdLCAxMClcbiAgICAgICAgICAgIH07XG5cblxuXG4gICAgICAgICAgICBpZihmaWd1cmVFbC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gPGZpZ2NhcHRpb24+IGNvbnRlbnRcbiAgICAgICAgICAgICAgICBpdGVtLnRpdGxlID0gZmlndXJlRWwuY2hpbGRyZW5bMV0uaW5uZXJIVE1MO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihsaW5rRWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIDxpbWc+IHRodW1ibmFpbCBlbGVtZW50LCByZXRyaWV2aW5nIHRodW1ibmFpbCB1cmxcbiAgICAgICAgICAgICAgICBpdGVtLm1zcmMgPSBsaW5rRWwuY2hpbGRyZW5bMF0uZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbS5lbCA9IGZpZ3VyZUVsOyAvLyBzYXZlIGxpbmsgdG8gZWxlbWVudCBmb3IgZ2V0VGh1bWJCb3VuZHNGblxuICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9O1xuXG4gICAgLy8gZmluZCBuZWFyZXN0IHBhcmVudCBlbGVtZW50XG4gICAgdmFyIGNsb3Nlc3QgPSBmdW5jdGlvbiBjbG9zZXN0KGVsLCBmbikge1xuICAgICAgICByZXR1cm4gZWwgJiYgKCBmbihlbCkgPyBlbCA6IGNsb3Nlc3QoZWwucGFyZW50Tm9kZSwgZm4pICk7XG4gICAgfTtcblxuICAgIC8vIHRyaWdnZXJzIHdoZW4gdXNlciBjbGlja3Mgb24gdGh1bWJuYWlsXG4gICAgdmFyIG9uVGh1bWJuYWlsc0NsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQgPyBlLnByZXZlbnREZWZhdWx0KCkgOiBlLnJldHVyblZhbHVlID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGVUYXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cbiAgICAgICAgLy8gZmluZCByb290IGVsZW1lbnQgb2Ygc2xpZGVcbiAgICAgICAgdmFyIGNsaWNrZWRMaXN0SXRlbSA9IGNsb3Nlc3QoZVRhcmdldCwgZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgIHJldHVybiAoZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdGSUdVUkUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYoIWNsaWNrZWRMaXN0SXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmluZCBpbmRleCBvZiBjbGlja2VkIGl0ZW0gYnkgbG9vcGluZyB0aHJvdWdoIGFsbCBjaGlsZCBub2Rlc1xuICAgICAgICAvLyBhbHRlcm5hdGl2ZWx5LCB5b3UgbWF5IGRlZmluZSBpbmRleCB2aWEgZGF0YS0gYXR0cmlidXRlXG4gICAgICAgIHZhciBjbGlja2VkR2FsbGVyeSA9IGNsaWNrZWRMaXN0SXRlbS5wYXJlbnROb2RlLFxuICAgICAgICAgICAgY2hpbGROb2RlcyA9IGNsaWNrZWRMaXN0SXRlbS5wYXJlbnROb2RlLmNoaWxkTm9kZXMsXG4gICAgICAgICAgICBudW1DaGlsZE5vZGVzID0gY2hpbGROb2Rlcy5sZW5ndGgsXG4gICAgICAgICAgICBub2RlSW5kZXggPSAwLFxuICAgICAgICAgICAgaW5kZXg7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1DaGlsZE5vZGVzOyBpKyspIHtcbiAgICAgICAgICAgIGlmKGNoaWxkTm9kZXNbaV0ubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoY2hpbGROb2Rlc1tpXSA9PT0gY2xpY2tlZExpc3RJdGVtKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBub2RlSW5kZXg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlSW5kZXgrKztcbiAgICAgICAgfVxuXG5cblxuICAgICAgICBpZihpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAvLyBvcGVuIFBob3RvU3dpcGUgaWYgdmFsaWQgaW5kZXggZm91bmRcbiAgICAgICAgICAgIG9wZW5QaG90b1N3aXBlKCBpbmRleCwgY2xpY2tlZEdhbGxlcnkgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8vIHBhcnNlIHBpY3R1cmUgaW5kZXggYW5kIGdhbGxlcnkgaW5kZXggZnJvbSBVUkwgKCMmcGlkPTEmZ2lkPTIpXG4gICAgdmFyIHBob3Rvc3dpcGVQYXJzZUhhc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksXG4gICAgICAgIHBhcmFtcyA9IHt9O1xuXG4gICAgICAgIGlmKGhhc2gubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB2YXJzID0gaGFzaC5zcGxpdCgnJicpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmKCF2YXJzW2ldKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGFpciA9IHZhcnNbaV0uc3BsaXQoJz0nKTtcbiAgICAgICAgICAgIGlmKHBhaXIubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zW3BhaXJbMF1dID0gcGFpclsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHBhcmFtcy5naWQpIHtcbiAgICAgICAgICAgIHBhcmFtcy5naWQgPSBwYXJzZUludChwYXJhbXMuZ2lkLCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH07XG5cbiAgICB2YXIgb3BlblBob3RvU3dpcGUgPSBmdW5jdGlvbihpbmRleCwgZ2FsbGVyeUVsZW1lbnQsIGRpc2FibGVBbmltYXRpb24sIGZyb21VUkwpIHtcbiAgICAgICAgdmFyIHBzd3BFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBzd3AnKVswXSxcbiAgICAgICAgICAgIGdhbGxlcnksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgaXRlbXM7XG5cbiAgICAgICAgaXRlbXMgPSBwYXJzZVRodW1ibmFpbEVsZW1lbnRzKGdhbGxlcnlFbGVtZW50KTtcblxuICAgICAgICAvLyBkZWZpbmUgb3B0aW9ucyAoaWYgbmVlZGVkKVxuICAgICAgICBvcHRpb25zID0ge1xuXG4gICAgICAgICAgICAvLyBkZWZpbmUgZ2FsbGVyeSBpbmRleCAoZm9yIFVSTClcbiAgICAgICAgICAgIGdhbGxlcnlVSUQ6IGdhbGxlcnlFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1wc3dwLXVpZCcpLFxuXG4gICAgICAgICAgICBnZXRUaHVtYkJvdW5kc0ZuOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgIC8vIFNlZSBPcHRpb25zIC0+IGdldFRodW1iQm91bmRzRm4gc2VjdGlvbiBvZiBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9cbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsID0gaXRlbXNbaW5kZXhdLmVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKVswXSwgLy8gZmluZCB0aHVtYm5haWxcbiAgICAgICAgICAgICAgICAgICAgcGFnZVlTY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgcmVjdCA9IHRodW1ibmFpbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7eDpyZWN0LmxlZnQsIHk6cmVjdC50b3AgKyBwYWdlWVNjcm9sbCwgdzpyZWN0LndpZHRofTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFBob3RvU3dpcGUgb3BlbmVkIGZyb20gVVJMXG4gICAgICAgIGlmKGZyb21VUkwpIHtcbiAgICAgICAgICAgIGlmKG9wdGlvbnMuZ2FsbGVyeVBJRHMpIHtcbiAgICAgICAgICAgICAgICAvLyBwYXJzZSByZWFsIGluZGV4IHdoZW4gY3VzdG9tIFBJRHMgYXJlIHVzZWRcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vcGhvdG9zd2lwZS5jb20vZG9jdW1lbnRhdGlvbi9mYXEuaHRtbCNjdXN0b20tcGlkLWluLXVybFxuICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBpdGVtcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZihpdGVtc1tqXS5waWQgPT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGluIFVSTCBpbmRleGVzIHN0YXJ0IGZyb20gMVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBwYXJzZUludChpbmRleCwgMTApIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBwYXJzZUludChpbmRleCwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXhpdCBpZiBpbmRleCBub3QgZm91bmRcbiAgICAgICAgaWYoIGlzTmFOKG9wdGlvbnMuaW5kZXgpICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZGlzYWJsZUFuaW1hdGlvbikge1xuICAgICAgICAgICAgb3B0aW9ucy5zaG93QW5pbWF0aW9uRHVyYXRpb24gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGFzcyBkYXRhIHRvIFBob3RvU3dpcGUgYW5kIGluaXRpYWxpemUgaXRcbiAgICAgICAgZ2FsbGVyeSA9IG5ldyBQaG90b1N3aXBlKCBwc3dwRWxlbWVudCwgUGhvdG9Td2lwZVVJX0RlZmF1bHQsIGl0ZW1zLCBvcHRpb25zKTtcbiAgICAgICAgZ2FsbGVyeS5pbml0KCk7XG4gICAgfTtcblxuICAgIC8vIGxvb3AgdGhyb3VnaCBhbGwgZ2FsbGVyeSBlbGVtZW50cyBhbmQgYmluZCBldmVudHNcbiAgICB2YXIgZ2FsbGVyeUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggZ2FsbGVyeVNlbGVjdG9yICk7XG5cbiAgICBmb3IodmFyIGkgPSAwLCBsID0gZ2FsbGVyeUVsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBnYWxsZXJ5RWxlbWVudHNbaV0uc2V0QXR0cmlidXRlKCdkYXRhLXBzd3AtdWlkJywgaSsxKTtcbiAgICAgICAgZ2FsbGVyeUVsZW1lbnRzW2ldLm9uY2xpY2sgPSBvblRodW1ibmFpbHNDbGljaztcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBVUkwgYW5kIG9wZW4gZ2FsbGVyeSBpZiBpdCBjb250YWlucyAjJnBpZD0zJmdpZD0xXG4gICAgdmFyIGhhc2hEYXRhID0gcGhvdG9zd2lwZVBhcnNlSGFzaCgpO1xuICAgIGlmKGhhc2hEYXRhLnBpZCAmJiBoYXNoRGF0YS5naWQpIHtcbiAgICAgICAgb3BlblBob3RvU3dpcGUoIGhhc2hEYXRhLnBpZCAsICBnYWxsZXJ5RWxlbWVudHNbIGhhc2hEYXRhLmdpZCAtIDEgXSwgdHJ1ZSwgdHJ1ZSApO1xuICAgIH1cbn07XG5cbi8vIGV4ZWN1dGUgYWJvdmUgZnVuY3Rpb25cbmluaXRQaG90b1N3aXBlRnJvbURPTSgnLmdhbGxlcnknKTtcbiJdfQ==
